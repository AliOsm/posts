---
date: 2025-02-06
day: ุงูุฎููุณ
tags: [database, ruby-on-rails]
---

ุงูุจูุงูุงุช ุงููุฑููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

ุฃุนูู ุญุงููุง ุนูู ุฅุถุงูุฉ ููุฒุฉ ุฌุฏูุฏุฉ ุฅูู ููุตุฉ ุจุงุญุซ (ูุฑูุจูุง ๐) ูุชุญุชุงุฌ ูุฐู ุงูููุฒุฉ ุฅูู ุชุฑุชูุจ ุงูุจูุงูุงุช ูุฑููููุงุ ููู ุตู ูู ุตููู ุงูุฌุฏูู ููุนุจูุฑ ุนู ุนูุตุฑู ููุฐุง ุงูุนูุตุฑ ูุฏ ูููู ูู ุงุจู ุฃู ูุฌููุนุฉ ุฃุจูุงุกุ ูููุฐุง ุฅูู ุฃู ูุญุตู ุนูู ุดุฌุฑุฉ ูู ุงูุจูุงูุงุช.

ูุฐุง ุงูุชูุซูู ููุจูุงูุงุช ููู ูููุชุดุฑ ูู ุญูุงุชูุง ูููููู ูู ุฎูุงูู ุชูุซูู ูุฆุงุช ุงูููุชุฌุงุช (ูุซูุง: ูุฆุฉ ุงูุจูุงูุฉ ุชุญุชูุง ููุชุฌุงุช ุงูุฃูุจุงู ูููุชุฌุงุช ุงููุญูู) ุฃู ุชูุซูู ุงูููุธููู ูู ุงูุดุฑูุฉ ุญุณุจ ุฃูุณุงููู (ูุซูุง: ูุณู ุชูููููุฌูุง ุงููุนูููุงุช ุชุญุชู ูุณู ุงูุตูุงูุฉ ููุณู ุงููุดุชุฑูุงุช).

ููุช ุฃุธู ุงูุฃูุฑ ุณููุง ููุง ููุฌุฏ ููู ุงููุซูุฑ ูู ุงูุชุนููุฏุงุชุ ูุฌุฑุฏ ุฌุฏูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุน ุนููุฏู ุจุงุณู `parent_id` ูู ุฎูุงูู ุชุนุฑู ุงูุฃุจ ููู ุตู ูู ุตููู ุงูุฌุฏููุ ูุฅุฐุง ูุงู ุงูุตู ุจุฏูู `parent_id`ุ ููุฐุง ูุนูู ุฃูู ุฌุฐุฑ ูู ูุฐู ุงูุดุฌุฑุฉุ ุณููุฉ.

ูููู ูุจู ุงูุจุฏุก ูู ุงูุชูููุฐ ูุฑุฑุช ุงูุจุญุซ ูุงููุฑุงุกุฉ ุนู ุงูุฃูุฑุ ูุงูุชุดูุช ุงูุฎูุงุฑุงุช ุงููุซูุฑุฉ ุงููุชุงุญุฉ ูู ุนูุฏ ุชูุซูู ูุฐุง ุงูููุน ูู ุงูุจูุงูุงุชุ ููููุง ุงูุฎูุงุฑ ุงููุฐููุฑ ูู ุงูููุฑุฉ ุงูุณุงุจูุฉ ูุงููุณูู ุจู "ุฃุจ-ุงุจู" (Parent-Child).

ุงุณุชุฎุฏุงู ูุฐุง ุงูููุน ุณููู ุฌุฏููุง ูู Ruby on Railsุ ุชุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ุงูุนููุฏ ุซู ุชุนุฑูู ุงูุนูุงูุฉ ูู ุงูู Model ููุง ูู ููุถูุญ ูู ุงูุตูุฑุฉ. ุจูุฐู ุงูุทุฑููุฉ ููููู ุงููุตูู ุฅูู ุฃุจ ุฃู ุนูุตุฑ ูู ุฎูุงู ุฏุงูุฉ `parent` ูุงููุตูู ุฅูู ุฃุจูุงุก ุฃู ุนูุตุฑ ูู ุฎูุงู ุฏุงูุฉ `children`.

ูุฐุง ุงูุฎูุงุฑ ูููููุฑ ูู ุณุฑุนุฉ ูุจูุฑุฉ ูู ุฅุถุงูุฉ ุงูุนูุงุตุฑ ุงูุฌุฏูุฏุฉุ ูุฃูุช ุชุญุชุงุฌ ุฅูู ูุชุงุจุฉ ุตููู ูุงุญุฏู ููุทุ ูููู ุงููุฑุงุกุฉ ููู ุชููู ุจุทูุฆุฉุ ูุฅุฐุง ููุฌุฏ ุนูุตุฑ ูุจุนุฏ ุนู ุงูุฌุฐุฑ ุงูุฎุงุต ุจู ุจูุณุงูุฉ 5 ุนูุงุตุฑุ ูุณุชุญุชุงุฌ ุฅูู 4 ุงุณุชุนูุงูุงุช ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชุตู ุฅูู ุงูุฌุฐุฑุ ูุฐูู ูููุตุญ ุจู ุฅุฐุง ูุงู ุฃุทูู ูุณุงุฑู ูู ุดุฌุฑุฉ ุจูุงูุงุชู ูุง ูุชุนุฏููู ุนูุตุฑูู ุฃู ุซูุงุซุฉ ุนูุงุตุฑ ูุญุฏ ุฃูุตู.

ุงูููุน ุงูุซุงูู ูุณูู ุงููุณุงุฑ ุงูููููุณ (Materialized Path)

ูู ูุฐุง ุงูููุน ุฃูุช ุชุญุชูุธ ุจูู ุขุจุงุก ุงูุนูุตุฑ ุฅูู ุฃู ุชุตู ุฅูู ุงูุฌุฐุฑ ูู ูู ุตู ูู ุตููู ุงูุฌุฏููุ ููุง ุชุญุชุงุฌ ุฅูู ุงููุซูุฑ ูู ุงูุงุณุชุนูุงูุงุช ูุชุตู ุฅูู ุฌุฐุฑ ุนูุตุฑู ููุนููู ูุฃูู ุชูุชูู ุงููุณุงุฑ ูุงูููุง ูู ุงูุนูุตุฑ ุฅูู ุงูุฌุฐุฑุ ูููู ุงููุชุงุจุฉ ูู ูุฐุง ุงูููุน ููููุฉ ูุญุฌู ุงูุจูุงูุงุช ุงูููุฎุฒููุฉ ุฃูุจุฑ.

ููุฌุฏ ููุชุจุฉ ูู Rails ุชูููุฑ ูู ูุฐุง ุงูููุน ูู ุงูุชูุซูู ุชุณูู `ancestry`ุ ููููู ุงูุงุทูุงุน ุนูููุง ูู ููุง:  
https://github.com/stefankroes/ancestry

ุงูููุน ุงูุฃุฎูุฑ ูุณูู ุงููุฌููุนุงุช ุงููุชุฏุงุฎูุฉ (Nested Sets)

ููุฐุง ุงูููุน ุฃุนูุฏููุ ููููู ููููุฑ ูุฑุงุกุฉ ุณุฑูุนุฉ ุฌุฏููุง ูุนูุงุตุฑ ุงูุดุฌุฑุฉ. ูุนูู ูุฐุง ุงูููุน ุจูุจุฏุฃ ููุดุงุจู ููุจุฏุฃ ุนูู ุงูู Segment Treeุ ูุงูุชู ุดุฑุญุชูุง ูู ูุฐุง ุงูููุทุน:  
https://www.youtube.com/live/U_sZY8WTX-Y

ุณุฑูุนูุงุ ูุณุชุฎุฏู ูุฐุง ุงูููุน 3 ุฃุนูุฏุฉ ููู `level` ู `left` ู `right` ูุชูุซูู ูุณุชูู ุงูุนูุงุตุฑ ูู ุงูุดุฌุฑุฉ ูุจุฏุงูุฉ ูููุงูุฉ ุงูุนูุงุตุฑ ุงููููุชููุฉ ููู ุนูุตุฑู ูู ุนูุงุตุฑ ุงูุดุฌุฑุฉ. ุจุงุณุชุฎุฏุงู ูุฐู ุงูุฃุนูุฏุฉ ููููู ุงูุงุณุชุนูุงู ุนู ุฃุจูุงุก ุนูุตุฑ ูู ุงูุนูุงุตุฑ ุจุณุฑุนุฉ ูุจูุฑุฉุ ูููู ูุณุงุจููุ ุงููุชุงุจุฉ ููู ููููุฉ.

ููุฌุฏ ููุชุจุฉ ูู Rails ุชูููุฑ ูู ูุฐุง ุงูููุน ูู ุงูุชูุซูู ุชุณูู `awesome_nested_set`ุ ููููู ุงูุงุทูุงุน ุนูููุง ูู ููุง:  
https://github.com/collectiveidea/awesome_nested_set

ูุฑุฑุช ุงูุงุจุชุนุงุฏ ุนู ุงูุฎูุงุฑ ุงูุฃูู ูุงูุฃุฎูุฑ ูู ุจุงุญุซ ูุงุณุชุฎุฏุงู ุงูุฎูุงุฑ ุงูุซุงููุ ูุงููุชุงุจุฉ ูู ุญุงูุชู ููููุฉ ูุงููุฑุงุกุฉ ูู ุงูุฃุณุงุณุ ููุง ุญุงุฌุฉ ููุชุนููุฏ ุงูุฅุถุงูู ูู ุงูุฎูุงุฑ ุงูุฃุฎูุฑ.

ูู ุงุณุชุฎุฏูุช ุฃู ููุน ูู ูุฐู ุงูุฃููุงุน ุณุงุจููุง ุ.ุ ููู ุชุนุฑู ุฃููุงุนูุง ุฃุฎุฑูุ ุดุงุฑููุง ููุณุชููุฏ ๐

ูุงูุณูุงู ุนูููู ๐๐ป
